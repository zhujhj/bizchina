{"ast":null,"code":"import { useCallback, useEffect, useState } from 'react';\nimport { useEventCallback, useEventListener } from '..';\nfunction useSessionStorage(key, initialValue) {\n  const readValue = useCallback(() => {\n    if (typeof window === 'undefined') {\n      return initialValue;\n    }\n    try {\n      const item = window.sessionStorage.getItem(key);\n      return item ? parseJSON(item) : initialValue;\n    } catch (error) {\n      console.warn(`Error reading sessionStorage key “${key}”:`, error);\n      return initialValue;\n    }\n  }, [initialValue, key]);\n  const [storedValue, setStoredValue] = useState(readValue);\n  const setValue = useEventCallback(value => {\n    if (typeof window == 'undefined') {\n      console.warn(`Tried setting sessionStorage key “${key}” even though environment is not a client`);\n    }\n    try {\n      const newValue = value instanceof Function ? value(storedValue) : value;\n      window.sessionStorage.setItem(key, JSON.stringify(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new Event('session-storage'));\n    } catch (error) {\n      console.warn(`Error setting sessionStorage key “${key}”:`, error);\n    }\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, []);\n  const handleStorageChange = useCallback(event => {\n    if ((event === null || event === void 0 ? void 0 : event.key) && event.key !== key) {\n      return;\n    }\n    setStoredValue(readValue());\n  }, [key, readValue]);\n  useEventListener('storage', handleStorageChange);\n  useEventListener('session-storage', handleStorageChange);\n  return [storedValue, setValue];\n}\nexport default useSessionStorage;\nfunction parseJSON(value) {\n  try {\n    return value === 'undefined' ? undefined : JSON.parse(value !== null && value !== void 0 ? value : '');\n  } catch (_a) {\n    console.log('parsing error on', {\n      value\n    });\n    return undefined;\n  }\n}","map":{"version":3,"names":["useCallback","useEffect","useState","useEventCallback","useEventListener","useSessionStorage","key","initialValue","readValue","window","item","sessionStorage","getItem","parseJSON","error","console","warn","storedValue","setStoredValue","setValue","value","newValue","Function","setItem","JSON","stringify","dispatchEvent","Event","handleStorageChange","event","undefined","parse","_a","log"],"sources":["/Users/jason/bizchina/node_modules/usehooks-ts/dist/esm/useSessionStorage/useSessionStorage.js"],"sourcesContent":["import { useCallback, useEffect, useState, } from 'react';\nimport { useEventCallback, useEventListener } from '..';\nfunction useSessionStorage(key, initialValue) {\n    const readValue = useCallback(() => {\n        if (typeof window === 'undefined') {\n            return initialValue;\n        }\n        try {\n            const item = window.sessionStorage.getItem(key);\n            return item ? parseJSON(item) : initialValue;\n        }\n        catch (error) {\n            console.warn(`Error reading sessionStorage key “${key}”:`, error);\n            return initialValue;\n        }\n    }, [initialValue, key]);\n    const [storedValue, setStoredValue] = useState(readValue);\n    const setValue = useEventCallback(value => {\n        if (typeof window == 'undefined') {\n            console.warn(`Tried setting sessionStorage key “${key}” even though environment is not a client`);\n        }\n        try {\n            const newValue = value instanceof Function ? value(storedValue) : value;\n            window.sessionStorage.setItem(key, JSON.stringify(newValue));\n            setStoredValue(newValue);\n            window.dispatchEvent(new Event('session-storage'));\n        }\n        catch (error) {\n            console.warn(`Error setting sessionStorage key “${key}”:`, error);\n        }\n    });\n    useEffect(() => {\n        setStoredValue(readValue());\n    }, []);\n    const handleStorageChange = useCallback((event) => {\n        if ((event === null || event === void 0 ? void 0 : event.key) && event.key !== key) {\n            return;\n        }\n        setStoredValue(readValue());\n    }, [key, readValue]);\n    useEventListener('storage', handleStorageChange);\n    useEventListener('session-storage', handleStorageChange);\n    return [storedValue, setValue];\n}\nexport default useSessionStorage;\nfunction parseJSON(value) {\n    try {\n        return value === 'undefined' ? undefined : JSON.parse(value !== null && value !== void 0 ? value : '');\n    }\n    catch (_a) {\n        console.log('parsing error on', { value });\n        return undefined;\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAS,OAAO;AACzD,SAASC,gBAAgB,EAAEC,gBAAgB,QAAQ,IAAI;AACvD,SAASC,iBAAiBA,CAACC,GAAG,EAAEC,YAAY,EAAE;EAC1C,MAAMC,SAAS,GAAGR,WAAW,CAAC,MAAM;IAChC,IAAI,OAAOS,MAAM,KAAK,WAAW,EAAE;MAC/B,OAAOF,YAAY;IACvB;IACA,IAAI;MACA,MAAMG,IAAI,GAAGD,MAAM,CAACE,cAAc,CAACC,OAAO,CAACN,GAAG,CAAC;MAC/C,OAAOI,IAAI,GAAGG,SAAS,CAACH,IAAI,CAAC,GAAGH,YAAY;IAChD,CAAC,CACD,OAAOO,KAAK,EAAE;MACVC,OAAO,CAACC,IAAI,CAAE,qCAAoCV,GAAI,IAAG,EAAEQ,KAAK,CAAC;MACjE,OAAOP,YAAY;IACvB;EACJ,CAAC,EAAE,CAACA,YAAY,EAAED,GAAG,CAAC,CAAC;EACvB,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAACM,SAAS,CAAC;EACzD,MAAMW,QAAQ,GAAGhB,gBAAgB,CAACiB,KAAK,IAAI;IACvC,IAAI,OAAOX,MAAM,IAAI,WAAW,EAAE;MAC9BM,OAAO,CAACC,IAAI,CAAE,qCAAoCV,GAAI,2CAA0C,CAAC;IACrG;IACA,IAAI;MACA,MAAMe,QAAQ,GAAGD,KAAK,YAAYE,QAAQ,GAAGF,KAAK,CAACH,WAAW,CAAC,GAAGG,KAAK;MACvEX,MAAM,CAACE,cAAc,CAACY,OAAO,CAACjB,GAAG,EAAEkB,IAAI,CAACC,SAAS,CAACJ,QAAQ,CAAC,CAAC;MAC5DH,cAAc,CAACG,QAAQ,CAAC;MACxBZ,MAAM,CAACiB,aAAa,CAAC,IAAIC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACtD,CAAC,CACD,OAAOb,KAAK,EAAE;MACVC,OAAO,CAACC,IAAI,CAAE,qCAAoCV,GAAI,IAAG,EAAEQ,KAAK,CAAC;IACrE;EACJ,CAAC,CAAC;EACFb,SAAS,CAAC,MAAM;IACZiB,cAAc,CAACV,SAAS,CAAC,CAAC,CAAC;EAC/B,CAAC,EAAE,EAAE,CAAC;EACN,MAAMoB,mBAAmB,GAAG5B,WAAW,CAAE6B,KAAK,IAAK;IAC/C,IAAI,CAACA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,KAAK,CAACvB,GAAG,KAAKuB,KAAK,CAACvB,GAAG,KAAKA,GAAG,EAAE;MAChF;IACJ;IACAY,cAAc,CAACV,SAAS,CAAC,CAAC,CAAC;EAC/B,CAAC,EAAE,CAACF,GAAG,EAAEE,SAAS,CAAC,CAAC;EACpBJ,gBAAgB,CAAC,SAAS,EAAEwB,mBAAmB,CAAC;EAChDxB,gBAAgB,CAAC,iBAAiB,EAAEwB,mBAAmB,CAAC;EACxD,OAAO,CAACX,WAAW,EAAEE,QAAQ,CAAC;AAClC;AACA,eAAed,iBAAiB;AAChC,SAASQ,SAASA,CAACO,KAAK,EAAE;EACtB,IAAI;IACA,OAAOA,KAAK,KAAK,WAAW,GAAGU,SAAS,GAAGN,IAAI,CAACO,KAAK,CAACX,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAG,EAAE,CAAC;EAC1G,CAAC,CACD,OAAOY,EAAE,EAAE;IACPjB,OAAO,CAACkB,GAAG,CAAC,kBAAkB,EAAE;MAAEb;IAAM,CAAC,CAAC;IAC1C,OAAOU,SAAS;EACpB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}