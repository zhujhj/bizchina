{"ast":null,"code":"import { useEffect, useState } from 'react';\nconst cachedScriptStatuses = {};\nfunction getScriptNode(src) {\n  const node = document.querySelector(`script[src=\"${src}\"]`);\n  const status = node === null || node === void 0 ? void 0 : node.getAttribute('data-status');\n  return {\n    node,\n    status\n  };\n}\nfunction useScript(src, options) {\n  const [status, setStatus] = useState(() => {\n    var _a;\n    if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n      return 'idle';\n    }\n    if (typeof window === 'undefined') {\n      return 'loading';\n    }\n    return (_a = cachedScriptStatuses[src]) !== null && _a !== void 0 ? _a : 'loading';\n  });\n  useEffect(() => {\n    var _a, _b;\n    if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n      return;\n    }\n    const cachedScriptStatus = cachedScriptStatuses[src];\n    if (cachedScriptStatus === 'ready' || cachedScriptStatus === 'error') {\n      setStatus(cachedScriptStatus);\n      return;\n    }\n    const script = getScriptNode(src);\n    let scriptNode = script.node;\n    if (!scriptNode) {\n      scriptNode = document.createElement('script');\n      scriptNode.src = src;\n      scriptNode.async = true;\n      scriptNode.setAttribute('data-status', 'loading');\n      document.body.appendChild(scriptNode);\n      const setAttributeFromEvent = event => {\n        const scriptStatus = event.type === 'load' ? 'ready' : 'error';\n        scriptNode === null || scriptNode === void 0 ? void 0 : scriptNode.setAttribute('data-status', scriptStatus);\n      };\n      scriptNode.addEventListener('load', setAttributeFromEvent);\n      scriptNode.addEventListener('error', setAttributeFromEvent);\n    } else {\n      setStatus((_b = (_a = script.status) !== null && _a !== void 0 ? _a : cachedScriptStatus) !== null && _b !== void 0 ? _b : 'loading');\n    }\n    const setStateFromEvent = event => {\n      const newStatus = event.type === 'load' ? 'ready' : 'error';\n      setStatus(newStatus);\n      cachedScriptStatuses[src] = newStatus;\n    };\n    scriptNode.addEventListener('load', setStateFromEvent);\n    scriptNode.addEventListener('error', setStateFromEvent);\n    return () => {\n      if (scriptNode) {\n        scriptNode.removeEventListener('load', setStateFromEvent);\n        scriptNode.removeEventListener('error', setStateFromEvent);\n      }\n      if (scriptNode && (options === null || options === void 0 ? void 0 : options.removeOnUnmount)) {\n        scriptNode.remove();\n      }\n    };\n  }, [src, options === null || options === void 0 ? void 0 : options.shouldPreventLoad, options === null || options === void 0 ? void 0 : options.removeOnUnmount]);\n  return status;\n}\nexport default useScript;","map":{"version":3,"names":["useEffect","useState","cachedScriptStatuses","getScriptNode","src","node","document","querySelector","status","getAttribute","useScript","options","setStatus","_a","shouldPreventLoad","window","_b","cachedScriptStatus","script","scriptNode","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","scriptStatus","type","addEventListener","setStateFromEvent","newStatus","removeEventListener","removeOnUnmount","remove"],"sources":["/Users/jason/bizchina/node_modules/usehooks-ts/dist/esm/useScript/useScript.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nconst cachedScriptStatuses = {};\nfunction getScriptNode(src) {\n    const node = document.querySelector(`script[src=\"${src}\"]`);\n    const status = node === null || node === void 0 ? void 0 : node.getAttribute('data-status');\n    return {\n        node,\n        status,\n    };\n}\nfunction useScript(src, options) {\n    const [status, setStatus] = useState(() => {\n        var _a;\n        if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n            return 'idle';\n        }\n        if (typeof window === 'undefined') {\n            return 'loading';\n        }\n        return (_a = cachedScriptStatuses[src]) !== null && _a !== void 0 ? _a : 'loading';\n    });\n    useEffect(() => {\n        var _a, _b;\n        if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n            return;\n        }\n        const cachedScriptStatus = cachedScriptStatuses[src];\n        if (cachedScriptStatus === 'ready' || cachedScriptStatus === 'error') {\n            setStatus(cachedScriptStatus);\n            return;\n        }\n        const script = getScriptNode(src);\n        let scriptNode = script.node;\n        if (!scriptNode) {\n            scriptNode = document.createElement('script');\n            scriptNode.src = src;\n            scriptNode.async = true;\n            scriptNode.setAttribute('data-status', 'loading');\n            document.body.appendChild(scriptNode);\n            const setAttributeFromEvent = (event) => {\n                const scriptStatus = event.type === 'load' ? 'ready' : 'error';\n                scriptNode === null || scriptNode === void 0 ? void 0 : scriptNode.setAttribute('data-status', scriptStatus);\n            };\n            scriptNode.addEventListener('load', setAttributeFromEvent);\n            scriptNode.addEventListener('error', setAttributeFromEvent);\n        }\n        else {\n            setStatus((_b = (_a = script.status) !== null && _a !== void 0 ? _a : cachedScriptStatus) !== null && _b !== void 0 ? _b : 'loading');\n        }\n        const setStateFromEvent = (event) => {\n            const newStatus = event.type === 'load' ? 'ready' : 'error';\n            setStatus(newStatus);\n            cachedScriptStatuses[src] = newStatus;\n        };\n        scriptNode.addEventListener('load', setStateFromEvent);\n        scriptNode.addEventListener('error', setStateFromEvent);\n        return () => {\n            if (scriptNode) {\n                scriptNode.removeEventListener('load', setStateFromEvent);\n                scriptNode.removeEventListener('error', setStateFromEvent);\n            }\n            if (scriptNode && (options === null || options === void 0 ? void 0 : options.removeOnUnmount)) {\n                scriptNode.remove();\n            }\n        };\n    }, [src, options === null || options === void 0 ? void 0 : options.shouldPreventLoad, options === null || options === void 0 ? void 0 : options.removeOnUnmount]);\n    return status;\n}\nexport default useScript;\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,MAAMC,oBAAoB,GAAG,CAAC,CAAC;AAC/B,SAASC,aAAaA,CAACC,GAAG,EAAE;EACxB,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAE,eAAcH,GAAI,IAAG,CAAC;EAC3D,MAAMI,MAAM,GAAGH,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACI,YAAY,CAAC,aAAa,CAAC;EAC3F,OAAO;IACHJ,IAAI;IACJG;EACJ,CAAC;AACL;AACA,SAASE,SAASA,CAACN,GAAG,EAAEO,OAAO,EAAE;EAC7B,MAAM,CAACH,MAAM,EAAEI,SAAS,CAAC,GAAGX,QAAQ,CAAC,MAAM;IACvC,IAAIY,EAAE;IACN,IAAI,CAACT,GAAG,KAAKO,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACG,iBAAiB,CAAC,EAAE;MACvF,OAAO,MAAM;IACjB;IACA,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;MAC/B,OAAO,SAAS;IACpB;IACA,OAAO,CAACF,EAAE,GAAGX,oBAAoB,CAACE,GAAG,CAAC,MAAM,IAAI,IAAIS,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,SAAS;EACtF,CAAC,CAAC;EACFb,SAAS,CAAC,MAAM;IACZ,IAAIa,EAAE,EAAEG,EAAE;IACV,IAAI,CAACZ,GAAG,KAAKO,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACG,iBAAiB,CAAC,EAAE;MACvF;IACJ;IACA,MAAMG,kBAAkB,GAAGf,oBAAoB,CAACE,GAAG,CAAC;IACpD,IAAIa,kBAAkB,KAAK,OAAO,IAAIA,kBAAkB,KAAK,OAAO,EAAE;MAClEL,SAAS,CAACK,kBAAkB,CAAC;MAC7B;IACJ;IACA,MAAMC,MAAM,GAAGf,aAAa,CAACC,GAAG,CAAC;IACjC,IAAIe,UAAU,GAAGD,MAAM,CAACb,IAAI;IAC5B,IAAI,CAACc,UAAU,EAAE;MACbA,UAAU,GAAGb,QAAQ,CAACc,aAAa,CAAC,QAAQ,CAAC;MAC7CD,UAAU,CAACf,GAAG,GAAGA,GAAG;MACpBe,UAAU,CAACE,KAAK,GAAG,IAAI;MACvBF,UAAU,CAACG,YAAY,CAAC,aAAa,EAAE,SAAS,CAAC;MACjDhB,QAAQ,CAACiB,IAAI,CAACC,WAAW,CAACL,UAAU,CAAC;MACrC,MAAMM,qBAAqB,GAAIC,KAAK,IAAK;QACrC,MAAMC,YAAY,GAAGD,KAAK,CAACE,IAAI,KAAK,MAAM,GAAG,OAAO,GAAG,OAAO;QAC9DT,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACG,YAAY,CAAC,aAAa,EAAEK,YAAY,CAAC;MAChH,CAAC;MACDR,UAAU,CAACU,gBAAgB,CAAC,MAAM,EAAEJ,qBAAqB,CAAC;MAC1DN,UAAU,CAACU,gBAAgB,CAAC,OAAO,EAAEJ,qBAAqB,CAAC;IAC/D,CAAC,MACI;MACDb,SAAS,CAAC,CAACI,EAAE,GAAG,CAACH,EAAE,GAAGK,MAAM,CAACV,MAAM,MAAM,IAAI,IAAIK,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGI,kBAAkB,MAAM,IAAI,IAAID,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,SAAS,CAAC;IACzI;IACA,MAAMc,iBAAiB,GAAIJ,KAAK,IAAK;MACjC,MAAMK,SAAS,GAAGL,KAAK,CAACE,IAAI,KAAK,MAAM,GAAG,OAAO,GAAG,OAAO;MAC3DhB,SAAS,CAACmB,SAAS,CAAC;MACpB7B,oBAAoB,CAACE,GAAG,CAAC,GAAG2B,SAAS;IACzC,CAAC;IACDZ,UAAU,CAACU,gBAAgB,CAAC,MAAM,EAAEC,iBAAiB,CAAC;IACtDX,UAAU,CAACU,gBAAgB,CAAC,OAAO,EAAEC,iBAAiB,CAAC;IACvD,OAAO,MAAM;MACT,IAAIX,UAAU,EAAE;QACZA,UAAU,CAACa,mBAAmB,CAAC,MAAM,EAAEF,iBAAiB,CAAC;QACzDX,UAAU,CAACa,mBAAmB,CAAC,OAAO,EAAEF,iBAAiB,CAAC;MAC9D;MACA,IAAIX,UAAU,KAAKR,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACsB,eAAe,CAAC,EAAE;QAC3Fd,UAAU,CAACe,MAAM,CAAC,CAAC;MACvB;IACJ,CAAC;EACL,CAAC,EAAE,CAAC9B,GAAG,EAAEO,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACG,iBAAiB,EAAEH,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACsB,eAAe,CAAC,CAAC;EACjK,OAAOzB,MAAM;AACjB;AACA,eAAeE,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}